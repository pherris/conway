{"version":3,"sources":["src/dom_helpers.ts","src/point.ts","src/active_points.ts","src/index.ts","../../.config/yarn/global/node_modules/parcel-bundler/src/builtins/bundle-url.js","../../.config/yarn/global/node_modules/parcel-bundler/src/builtins/css-loader.js"],"names":["bundleURL","getBundleURLCached","getBundleURL","Error","err","matches","stack","match","getBaseURL","url","replace","exports","bundle","require","updateLink","link","newLink","cloneNode","onload","remove","href","split","Date","now","parentNode","insertBefore","nextSibling","cssTimeout","reloadCSS","setTimeout","links","document","querySelectorAll","i","length","module"],"mappings":"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","file":"src.f10117fe.map","sourceRoot":"..","sourcesContent":["export const DOM = {\n    ROWS: BigInt(100),\n    COLS: BigInt(100)\n}\n\n// create the grid cells\nexport function createGrid(inputWrapper): void {\n    // clean up just in case\n    inputWrapper.childNodes.forEach((node) => node.remove())\n\n    for (let y = BigInt(0); y < DOM.ROWS; y++) {\n        const row = document.createElement('div')\n        row.setAttribute('data-row', y.toString())\n        inputWrapper.appendChild(row)\n        for (let x = BigInt(0); x < DOM.COLS; x++) {\n            const clickableElement = document.createElement('div')\n            clickableElement.classList.add('cell')\n            clickableElement.setAttribute('data-x', x.toString());\n            clickableElement.setAttribute('data-y', y.toString())\n            clickableElement.setAttribute('data-selected', 'false');\n            row.appendChild(clickableElement)\n        }\n    }\n\n}\n\nexport function toggleSelected(cell): bigint[] {\n    if (cellIsSelected(cell)) {\n        deselectCell(cell)\n    } else {\n        selectCell(cell)\n    }\n    return getCellCoordinates(cell)\n}\n\nexport function deselectCell(cell) {\n    cell.classList.remove('selected')\n}\n\nexport function selectCell(cell) {\n    cell.classList.add('selected')\n}\n\n// inspects the DOM for currently selected cells\nexport function getSelected(): bigint[][] {\n    const coordinates = []\n    document.querySelectorAll('#input .cell.selected').forEach(selectedCell => {\n        coordinates.push(getCellCoordinates(selectedCell))\n    })\n    return coordinates\n}\n\nexport function cellIsSelected(cell): boolean {\n    return cell.classList.contains('selected')\n}\n\nexport function getCellCoordinates(cell): bigint[] {\n    return [BigInt(cell.getAttribute('data-x')), BigInt(cell.getAttribute('data-y'))]\n}\n\nexport function getCellFromCoordinates(x: string, y: string) {\n    return document.querySelector(`[data-x=\"${x}\"][data-y=\"${y}\"]`)\n}\n","// represents a point in the grid which is aware of the coordinates of each of its neighbors\nexport default class Point {\n    private MIN: bigint = BigInt(0);\n    private MAX: bigint = BigInt(18446744073709551616);\n\n    private x: bigint;\n    private y: bigint;\n    public selected: boolean;\n\n    constructor(x: bigint, y: bigint, selected: boolean) {\n        this.x = x;\n        this.y = y;\n        this.selected = selected;\n    }\n\n    get coordinates(): bigint[] {\n        return [this.x, this.y]\n    }\n\n    neighbors(): bigint[][] {\n        return [\n            this.topLeftNeighbor(),\n            this.topNeighbor(),\n            this.topRightNeighbor(),\n            this.leftNeighbor(),\n            this.rightNeighbor(),\n            this.bottomLeftNeighbor(),\n            this.bottomNeighbor(),\n            this.bottomRightNeighbor()\n        ]\n    }\n\n    private topLeftNeighbor(): Array<bigint> {\n        return [this.nextLowerCoordinate(this.x), this.nextHigherCoordinate(this.y)]\n    }\n\n    private topNeighbor(): Array<bigint> {\n        return [this.x, this.nextHigherCoordinate(this.y)]\n    }\n\n    private topRightNeighbor(): Array<bigint> {\n        return [this.nextHigherCoordinate(this.x), this.nextHigherCoordinate(this.y)]\n    }\n\n    private leftNeighbor(): Array<bigint> {\n        return [this.nextLowerCoordinate(this.x), this.y]\n    }\n\n    private rightNeighbor(): Array<bigint> {\n        return [this.nextHigherCoordinate(this.x), this.y]\n    }\n\n    private bottomLeftNeighbor(): Array<bigint> {\n        return [this.nextLowerCoordinate(this.x), this.nextLowerCoordinate(this.y)]\n    }\n\n    private bottomNeighbor(): Array<bigint> {\n        return [this.x, this.nextLowerCoordinate(this.y)]\n    }\n\n    private bottomRightNeighbor(): Array<bigint> {\n        return [this.nextHigherCoordinate(this.x), this.nextLowerCoordinate(this.y)]\n    }\n\n    private nextHigherCoordinate(coord: bigint): bigint {\n        return (coord == this.MAX) ? this.MIN : coord + BigInt(1)\n    }\n\n    private nextLowerCoordinate(coord: bigint): bigint {\n        return (coord == this.MIN) ? this.MAX : coord - BigInt(1)\n    }\n}\n","import Point from \"./point\";\n\nexport default class ActivePoints {\n    // We're going to use an array to hold the active points and use the slower `find` approach to pull back each item we\n    // are interested in.  The preference would be to use a hash where the key was an array of the `x` and `y` coordinates\n    // which would make lookup very snappy, however I found I cannot use an object as they key in Typescript and I cannot \n    // serialize the larger numbers without losing percision. \n\n    // If speed is important or this approach proves itself to be too slow, I would move this structure onto a language \n    // where the map approach was possible - probably shouldve picked Ruby...\n\n    cache: Array<Point> = []\n    private _removed: Array<Point> = []\n\n    constructor() { }\n\n    get cached(): bigint[][] {\n        return this.cache.map(point => point.coordinates)\n    }\n\n    get removedItems(): bigint[][] {\n        return this._removed.map(point => point.coordinates)\n    }\n\n    public cleanRemoved(): void {\n        this._removed = []\n    }\n\n    // add an item into the cache, has a side effect of hydrating siblings - could be more of a pure function\n    public addOrUpdate(point: Point): void {\n        if (!this.find(point.coordinates)) {\n            this.cache.push(point)\n        }\n\n        point.neighbors().forEach((neighboringCoordinates: bigint[]) => {\n            // if our neighbor already exists, we've nothing to do\n            if (this.find(neighboringCoordinates)) {\n                return\n            }\n\n            this.cache.push(new Point(neighboringCoordinates[0], neighboringCoordinates[1], false))\n        })\n    }\n\n    // safely removes an item from the cache returning `true` if it succeeds and `false` if it does not\n    public remove(point: Point): boolean {\n        const indexToRemove = this.findIndexInCache(point.coordinates)\n        if (indexToRemove == -1) {\n            return false\n        }\n\n        this._removed.push(this.cache.splice(indexToRemove, 1)[0])\n        return true\n    }\n\n    // get the cached item if it exists\n    public find(coordinates: bigint[]): Point {\n        const index = this.findIndexInCache(coordinates)\n        if (index == -1) return null;\n        return this.cache[index]\n    }\n\n    // find the siblings of this point and return the total number that are selected\n    public countOfSelectedSiblings(point: Point): number {\n        const cachedPoint = this.cache[this.findIndexInCache(point.coordinates)]\n        return cachedPoint.neighbors().filter(coordinates => {\n            const neighboringIndex = this.findIndexInCache(coordinates)\n            return neighboringIndex > -1 && this.cache[neighboringIndex].selected\n        }).length\n    }\n\n    // returns the index of the object you seek\n    private findIndexInCache(coordinates: bigint[]): number {\n        let x\n        let y\n        [x, y] = coordinates\n        return this.cache.findIndex(point => {\n            return point.coordinates[0] == x && point.coordinates[1] == y\n        })\n    }\n}\n","// index.ts\nimport message from './message'\nimport { createGrid, DOM, toggleSelected, cellIsSelected, getCellCoordinates, getCellFromCoordinates, deselectCell, selectCell } from './dom_helpers'\nimport Point from './point'\nimport ActivePoints from './active_points'\nimport './style.scss'\n\nconst runButton = document.getElementById('run')\nconst frameContainer = document.getElementById('frame')\nconst inputWrapper = document.getElementById('input')\nconst initialState = <HTMLInputElement>document.getElementById('initial-state')\nconst currentState = <HTMLInputElement>document.getElementById('meta')\nlet running: boolean = false\nlet frameCount: number = 0\nconst activePoints = new ActivePoints()\n\nfunction addPoint(coordinates: bigint[], selected: boolean): void {\n    const existingCachedItem = activePoints.find(coordinates)\n\n    let point: Point\n\n    if (existingCachedItem) {\n        existingCachedItem.selected = !existingCachedItem.selected\n        point = existingCachedItem\n    } else {\n        point = new Point(coordinates[0], coordinates[1], selected)\n    }\n\n    activePoints.addOrUpdate(point)\n}\n\n// This method determines if the UI contains any of the active points and displays them, it also serializes the cache into the textarea\nfunction syncUi(visibleAddedPoints: Array<Point>, visibleRemovedPoints: Array<Point>): void {\n    visibleAddedPoints.forEach(point => {\n        const cell = getCellFromCoordinates(point.coordinates[0].toString(), point.coordinates[1].toString())\n        selectCell(cell)\n    })\n\n    visibleRemovedPoints.forEach(point => {\n        const cell = getCellFromCoordinates(point.coordinates[0].toString(), point.coordinates[1].toString())\n        deselectCell(cell)\n    })\n\n    const selectedPoints = activePoints.cached\n        .filter(coordinates => activePoints.find(coordinates).selected)\n        .reduce((accumulator: string[][], coordinates) => {\n            accumulator.push([coordinates[0].toString(), coordinates[1].toString()])\n            return accumulator\n        }, [])\n\n    currentState.querySelector('pre').innerText = JSON.stringify(selectedPoints, null, 2)\n    frameContainer.innerText = (frameCount++).toString()\n}\n\nfunction perform() {\n    console.log(`Cache contains ${activePoints.cached.length} items`)\n    if (!running) return\n\n    const added = []\n    const removed = []\n    const surviving = []\n    activePoints.cached.forEach(coordinate => {\n        const point = activePoints.find(coordinate)\n        const selectedSiblings: number = activePoints.countOfSelectedSiblings(point)\n\n        if (point.selected && (selectedSiblings < 2 || selectedSiblings > 3)) {\n            removed.push(point)\n        }\n\n        // be born!\n        if (!point.selected && selectedSiblings === 3) {\n            added.push(point)\n        }\n\n        // survive\n        if (point.selected && (selectedSiblings == 2 || selectedSiblings == 3)) {\n            surviving.push(point)\n        }\n    })\n\n    // update the cache\n    removed.forEach(point => activePoints.remove(point))\n    added.concat(surviving).forEach(point => (point.selected = true) && activePoints.addOrUpdate(point))\n    activePoints.cleanRemoved()\n\n    syncUi(\n        added.filter(point => {\n            let x = point.coordinates[0]\n            let y = point.coordinates[1]\n            return point.selected && x < DOM.COLS && y < DOM.ROWS\n        }),\n\n        removed.filter(point => {\n            let x = point.coordinates[0]\n            let y = point.coordinates[1]\n            return x < DOM.COLS && y < DOM.ROWS\n        })\n    )\n    setTimeout(perform, 0)\n}\n\n// Add the ability to click cells to toggle them on and off\ninputWrapper.addEventListener('click', (e) => {\n    const cell = e.srcElement\n    addPoint(toggleSelected(cell), cellIsSelected(cell))\n})\n\nrunButton.addEventListener('click', () => {\n    // allow run button to start and stop\n    if (running) {\n        runButton.innerText = 'Restart'\n        running = false\n        return\n    }\n\n    running = true\n    runButton.innerText = 'Stop'\n    setTimeout(perform, 0)\n})\n\ninitialState.addEventListener('change', () => {\n    const newState = JSON.parse(initialState.value)\n    newState.forEach(coordinates => {\n        const cell = <HTMLElement>getCellFromCoordinates(coordinates[0], coordinates[1])\n        cell.click()\n    })\n})\n\ncreateGrid(inputWrapper)\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n"]}