{"version":3,"sources":["src/dom_helpers.ts","src/point.ts","src/cached_points.ts","src/index.ts","../../.config/yarn/global/node_modules/parcel-bundler/src/builtins/bundle-url.js","../../.config/yarn/global/node_modules/parcel-bundler/src/builtins/css-loader.js"],"names":["bundleURL","getBundleURLCached","getBundleURL","Error","err","matches","stack","match","getBaseURL","url","replace","exports","bundle","require","updateLink","link","newLink","cloneNode","onload","remove","href","split","Date","now","parentNode","insertBefore","nextSibling","cssTimeout","reloadCSS","setTimeout","links","document","querySelectorAll","i","length","module"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAO,IAAM,GAAG,GAAG;AACf,EAAA,IAAI,EAAE,GADS;AAEf,EAAA,IAAI,EAAE;AAFS,CAAZ,EAKP;;;;AACM,SAAU,UAAV,CAAqB,YAArB,EAAiC;AACnC,MAAI,CAAC,YAAL,EAAmB,OADgB,CAGnC;;AACA,EAAA,YAAY,CAAC,UAAb,CAAwB,OAAxB,CAAgC,UAAC,IAAD;AAAA,WAAU,IAAI,CAAC,MAAL,EAAV;AAAA,GAAhC;;AAEA,OAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,GAAG,CAAC,IAAxB,EAA8B,CAAC,EAA/B,EAAmC;AAC/B,QAAM,GAAG,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAZ;AACA,IAAA,GAAG,CAAC,YAAJ,CAAiB,UAAjB,EAA6B,CAAC,CAAC,QAAF,EAA7B;AACA,IAAA,YAAY,CAAC,WAAb,CAAyB,GAAzB;;AACA,SAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,GAAG,CAAC,IAAxB,EAA8B,CAAC,EAA/B,EAAmC;AAC/B,UAAM,gBAAgB,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAzB;AACA,MAAA,gBAAgB,CAAC,SAAjB,CAA2B,GAA3B,CAA+B,MAA/B;AACA,MAAA,gBAAgB,CAAC,YAAjB,CAA8B,QAA9B,EAAwC,CAAC,CAAC,QAAF,EAAxC;AACA,MAAA,gBAAgB,CAAC,YAAjB,CAA8B,QAA9B,EAAwC,CAAC,CAAC,QAAF,EAAxC;AACA,MAAA,gBAAgB,CAAC,YAAjB,CAA8B,eAA9B,EAA+C,OAA/C;AACA,MAAA,GAAG,CAAC,WAAJ,CAAgB,gBAAhB;AACH;AACJ;AAEJ;;AAEK,SAAU,cAAV,CAAyB,IAAzB,EAA6B;AAC/B,MAAI,cAAc,CAAC,IAAD,CAAlB,EAA0B;AACtB,IAAA,YAAY,CAAC,IAAD,CAAZ;AACH,GAFD,MAEO;AACH,IAAA,UAAU,CAAC,IAAD,CAAV;AACH;;AACD,SAAO,kBAAkB,CAAC,IAAD,CAAzB;AACH;;AAEK,SAAU,YAAV,CAAuB,IAAvB,EAA2B;AAC7B,EAAA,IAAI,CAAC,SAAL,CAAe,MAAf,CAAsB,UAAtB;AACH;;AAEK,SAAU,UAAV,CAAqB,IAArB,EAAyB;AAC3B,EAAA,IAAI,CAAC,SAAL,CAAe,GAAf,CAAmB,UAAnB;AACH,EAED;;;AACM,SAAU,WAAV,GAAqB;AACvB,MAAM,WAAW,GAAG,EAApB;AACA,EAAA,QAAQ,CAAC,gBAAT,CAA0B,uBAA1B,EAAmD,OAAnD,CAA2D,UAAA,YAAY,EAAG;AACtE,IAAA,WAAW,CAAC,IAAZ,CAAiB,kBAAkB,CAAC,YAAD,CAAnC;AACH,GAFD;AAGA,SAAO,WAAP;AACH;;AAEK,SAAU,cAAV,CAAyB,IAAzB,EAA6B;AAC/B,SAAO,IAAI,CAAC,SAAL,CAAe,QAAf,CAAwB,UAAxB,CAAP;AACH;;AAEK,SAAU,kBAAV,CAA6B,IAA7B,EAAiC;AACnC,SAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,YAAL,CAAkB,QAAlB,CAAD,CAAT,EAAwC,QAAQ,CAAC,IAAI,CAAC,YAAL,CAAkB,QAAlB,CAAD,CAAhD,CAAP;AACH;;AAEK,SAAU,sBAAV,CAAiC,CAAjC,EAA4C,CAA5C,EAAqD;AACvD,SAAO,QAAQ,CAAC,aAAT,qBAAmC,CAAnC,0BAAkD,CAAlD,SAAP;AACH;;;;;;;;;;;;;;;AChED;IACqB;;;AAoBjB,iBAAY,CAAZ,EAAuB,YAAvB,EAA6C,CAA7C,EAAwD,YAAxD,EAA8E,QAA9E,EAA+F;AAAA;;AAC3F,SAAK,CAAL,GAAS,CAAT;AACA,SAAK,CAAL,GAAS,CAAT;AACA,SAAK,YAAL,GAAoB,YAApB;AACA,SAAK,YAAL,GAAoB,YAApB;AACA,SAAK,QAAL,GAAgB,QAAhB,CAL2F,CAO3F;;AACA,SAAK,UAAL,GAAkB,KAAK,eAAL,GAAuB,IAAvB,CAA4B,GAA5B,CAAlB;AACA,SAAK,MAAL,GAAc,KAAK,WAAL,GAAmB,IAAnB,CAAwB,GAAxB,CAAd;AACA,SAAK,WAAL,GAAmB,KAAK,gBAAL,GAAwB,IAAxB,CAA6B,GAA7B,CAAnB;AACA,SAAK,OAAL,GAAe,KAAK,YAAL,GAAoB,IAApB,CAAyB,GAAzB,CAAf;AACA,SAAK,QAAL,GAAgB,KAAK,aAAL,GAAqB,IAArB,CAA0B,GAA1B,CAAhB;AACA,SAAK,aAAL,GAAqB,KAAK,kBAAL,GAA0B,IAA1B,CAA+B,GAA/B,CAArB;AACA,SAAK,SAAL,GAAiB,KAAK,cAAL,GAAsB,IAAtB,CAA2B,GAA3B,CAAjB;AACA,SAAK,cAAL,GAAsB,KAAK,mBAAL,GAA2B,IAA3B,CAAgC,GAAhC,CAAtB;AAEA,SAAK,GAAL,GAAW,CAAC,KAAK,CAAN,EAAS,KAAK,YAAd,EAA4B,KAAK,CAAjC,EAAoC,KAAK,YAAzC,EAAuD,IAAvD,CAA4D,GAA5D,CAAX;AACH;;;;AAMD;gCACS;AACL,aAAO,CACH,KAAK,UADF,EAEH,KAAK,MAFF,EAGH,KAAK,WAHF,EAIH,KAAK,OAJF,EAKH,KAAK,QALF,EAMH,KAAK,aANF,EAOH,KAAK,SAPF,EAQH,KAAK,cARF,CAAP;AAUH;;;yCAEyB;AACtB,aAAO,KAAK,mBAAL,CAAyB,KAAK,CAA9B,EAAiC,KAAK,YAAtC,EAAoD,MAApD,CAA2D,KAAK,oBAAL,CAA0B,KAAK,CAA/B,EAAkC,KAAK,YAAvC,CAA3D,CAAP;AACH;;;qCAEqB;AAClB,aAAO,CAAC,KAAK,CAAN,EAAS,KAAK,YAAd,EAA4B,MAA5B,CAAmC,KAAK,oBAAL,CAA0B,KAAK,CAA/B,EAAkC,KAAK,YAAvC,CAAnC,CAAP;AACH;;;0CAE0B;AACvB,aAAO,KAAK,oBAAL,CAA0B,KAAK,CAA/B,EAAkC,KAAK,YAAvC,EAAqD,MAArD,CAA4D,KAAK,oBAAL,CAA0B,KAAK,CAA/B,EAAkC,KAAK,YAAvC,CAA5D,CAAP;AACH;;;mCAEmB;AAChB,aAAO,KAAK,mBAAL,CAAyB,KAAK,CAA9B,EAAiC,KAAK,YAAtC,EAAoD,MAApD,CAA2D,CAAC,KAAK,CAAN,EAAS,KAAK,YAAd,CAA3D,CAAP;AACH;;;oCAEoB;AACjB,aAAO,KAAK,oBAAL,CAA0B,KAAK,CAA/B,EAAkC,KAAK,YAAvC,EAAqD,MAArD,CAA4D,CAAC,KAAK,CAAN,EAAS,KAAK,YAAd,CAA5D,CAAP;AACH;;;sCAEsB;AACnB,aAAO,KAAK,mBAAL,CAAyB,KAAK,CAA9B,EAAiC,KAAK,YAAtC,EAAoD,MAApD,CAA2D,KAAK,mBAAL,CAAyB,KAAK,CAA9B,EAAiC,KAAK,YAAtC,CAA3D,CAAP;AACH;;;kCAEkB;AACf,aAAO,CAAC,KAAK,CAAN,EAAS,KAAK,YAAd,EAA4B,MAA5B,CAAmC,KAAK,mBAAL,CAAyB,KAAK,CAA9B,EAAiC,KAAK,YAAtC,CAAnC,CAAP;AACH;;;uCAEuB;AACpB,aAAO,KAAK,oBAAL,CAA0B,KAAK,CAA/B,EAAkC,KAAK,YAAvC,EAAqD,MAArD,CAA4D,KAAK,mBAAL,CAAyB,KAAK,CAA9B,EAAiC,KAAK,YAAtC,CAA5D,CAAP;AACH;;;yCAE4B,OAAe,YAAkB;AAC1D,UAAI,KAAK,IAAI,KAAK,CAAC,GAAnB,EAAwB;AACpB,QAAA,UAAU,GAAG,UAAU,GAAG,CAA1B;AACA,QAAA,KAAK,GAAG,KAAK,CAAC,GAAd;AACH,OAHD,MAGO;AACH,QAAA,KAAK,GAAG,KAAK,GAAG,CAAhB;AACH;;AAED,UAAI,UAAU,GAAG,KAAK,CAAC,cAAvB,EAAuC;AACnC,QAAA,UAAU,GAAG,CAAb;AACH;;AACD,aAAO,CAAC,KAAD,EAAQ,UAAR,CAAP;AACH;;;wCAE2B,OAAe,YAAkB;AACzD,UAAI,KAAK,IAAI,KAAK,CAAC,GAAnB,EAAwB;AACpB,QAAA,UAAU,GAAG,UAAU,GAAG,CAA1B;AACA,QAAA,KAAK,GAAG,KAAK,CAAC,GAAd;AACH,OAHD,MAGO;AACH,QAAA,KAAK,GAAG,KAAK,GAAG,CAAhB;AACH;;AAED,UAAI,UAAU,IAAI,CAAlB,EAAqB;AACjB,QAAA,UAAU,GAAG,KAAK,CAAC,cAAnB;AACH;;AACD,aAAO,CAAC,KAAD,EAAQ,UAAR,CAAP;AACH;;;wBA5Ec;AACX,aAAO,KAAK,GAAZ;AACH;;;;;;;AAzCM,KAAA,CAAA,GAAA,GAAc,CAAd;AACA,KAAA,CAAA,GAAA,GAAc,MAAM,CAAC,gBAArB,EAAsC;;AACtC,KAAA,CAAA,cAAA,GAAyB,IAAzB,EAA8B;;;;;;;;;ACJzC;;;;;;;;;;;;;;;;;;IAEqB;;;AAIjB,0BAAA;AAAA;;AAHA,SAAA,KAAA,GAA+B,EAA/B;AACQ,SAAA,QAAA,GAAkC,EAAlC;AAES;;;;mCAeE;AACf,WAAK,QAAL,GAAgB,EAAhB;AACH,MAED;;;;gCACmB,OAAY;AAAA;;AAC3B,UAAI,CAAC,KAAK,KAAL,CAAW,KAAK,CAAC,WAAjB,CAAL,EAAoC;AAChC,aAAK,KAAL,CAAW,KAAK,CAAC,WAAjB,IAAgC,KAAhC;AACH;;AACD,WAAK,KAAL,CAAW,KAAK,CAAC,WAAjB,EAA8B,QAA9B,GAAyC,KAAK,CAAC,QAA/C;AAEA,MAAA,KAAK,CAAC,SAAN,GAAkB,OAAlB,CAA0B,UAAC,qBAAD,EAA0B;AAChD,YAAM,WAAW,GAAG,KAAI,CAAC,KAAL,CAAW,qBAAX,CAApB;;AAEA,YAAI,WAAJ,EAAiB;AACb;AACH;;AAL+C,oCAOP,qBAAqB,CAAC,KAAtB,CAA4B,GAA5B,CAPO;AAAA;AAAA,YAO3C,CAP2C;AAAA,YAOxC,YAPwC;AAAA,YAO1B,CAP0B;AAAA,YAOvB,YAPuB;;AAQhD,QAAA,KAAI,CAAC,KAAL,CAAW,qBAAX,IAAoC,IAAI,cAAJ,CAAU,QAAQ,CAAC,CAAD,CAAlB,EAAuB,QAAQ,CAAC,YAAD,CAA/B,EAA+C,QAAQ,CAAC,CAAD,CAAvD,EAA4D,QAAQ,CAAC,YAAD,CAApE,EAAoF,KAApF,CAApC;AACH,OATD;AAUH,MAED;;;;2BACc,OAAY;AACtB,WAAK,KAAL,CAAW,KAAK,CAAC,WAAjB;;AAEA,UAAI,CAAC,KAAK,KAAL,CAAW,KAAK,CAAC,WAAjB,CAAL,EAAoC;AAChC,eAAO,KAAP;AACH;;AAED,WAAK,QAAL,CAAc,KAAK,CAAC,WAApB,IAAmC,KAAnC;AAEA,aAAO,OAAO,KAAK,KAAL,CAAW,KAAK,CAAC,WAAjB,CAAd;AACH,MAED;;;;4CAC+B,OAAY;AAAA;;AACvC;AACA,aAAO,KAAK,CAAC,SAAN,GAAkB,MAAlB,CAAyB,UAAA,qBAAqB,EAAG;AACpD,YAAM,WAAW,GAAG,MAAI,CAAC,KAAL,CAAW,qBAAX,CAApB;AACA,eAAO,WAAW,IAAI,WAAW,CAAC,QAAlC;AACH,OAHM,EAGJ,MAHH;AAIH;;;wBAxDS;AACN,aAAO,KAAK,KAAZ;AACH;;;wBAEe;AACZ;AACA,aAAO,EAAP;AACH;;;wBAEe;AACZ,aAAO,KAAK,QAAZ;AACH;;;;;;;;AEnBL,IAAIA,SAAS,GAAG,IAAhB;;AACA,SAASC,kBAAT,GAA8B;AAC5B,MAAI,CAACD,SAAL,EAAgB;AACdA,IAAAA,SAAS,GAAGE,YAAY,EAAxB;AACD;;AAED,SAAOF,SAAP;AACD;;AAED,SAASE,YAAT,GAAwB;AACtB;AACA,MAAI;AACF,UAAM,IAAIC,KAAJ,EAAN;AACD,GAFD,CAEE,OAAOC,GAAP,EAAY;AACZ,QAAIC,OAAO,GAAG,CAAC,KAAKD,GAAG,CAACE,KAAV,EAAiBC,KAAjB,CAAuB,gCAAvB,CAAd;;AACA,QAAIF,OAAJ,EAAa;AACX,aAAOG,UAAU,CAACH,OAAO,CAAC,CAAD,CAAR,CAAjB;AACD;AACF;;AAED,SAAO,GAAP;AACD;;AAED,SAASG,UAAT,CAAoBC,GAApB,EAAyB;AACvB,SAAO,CAAC,KAAKA,GAAN,EAAWC,OAAX,CAAmB,uCAAnB,EAA4D,IAA5D,IAAoE,GAA3E;AACD;;AAEDC,OAAO,CAACT,YAAR,GAAuBD,kBAAvB;AACAU,OAAO,CAACH,UAAR,GAAqBA,UAArB;;AC5BA,IAAII,MAAM,GAAGC,OAAO,CAAC,cAAD,CAApB;;AAEA,SAASC,UAAT,CAAoBC,IAApB,EAA0B;AACxB,MAAIC,OAAO,GAAGD,IAAI,CAACE,SAAL,EAAd;;AACAD,EAAAA,OAAO,CAACE,MAAR,GAAiB,YAAY;AAC3BH,IAAAA,IAAI,CAACI,MAAL;AACD,GAFD;;AAGAH,EAAAA,OAAO,CAACI,IAAR,GAAeL,IAAI,CAACK,IAAL,CAAUC,KAAV,CAAgB,GAAhB,EAAqB,CAArB,IAA0B,GAA1B,GAAgCC,IAAI,CAACC,GAAL,EAA/C;AACAR,EAAAA,IAAI,CAACS,UAAL,CAAgBC,YAAhB,CAA6BT,OAA7B,EAAsCD,IAAI,CAACW,WAA3C;AACD;;AAED,IAAIC,UAAU,GAAG,IAAjB;;AACA,SAASC,SAAT,GAAqB;AACnB,MAAID,UAAJ,EAAgB;AACd;AACD;;AAEDA,EAAAA,UAAU,GAAGE,UAAU,CAAC,YAAY;AAClC,QAAIC,KAAK,GAAGC,QAAQ,CAACC,gBAAT,CAA0B,wBAA1B,CAAZ;;AACA,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,KAAK,CAACI,MAA1B,EAAkCD,CAAC,EAAnC,EAAuC;AACrC,UAAIrB,MAAM,CAACJ,UAAP,CAAkBsB,KAAK,CAACG,CAAD,CAAL,CAASb,IAA3B,MAAqCR,MAAM,CAACV,YAAP,EAAzC,EAAgE;AAC9DY,QAAAA,UAAU,CAACgB,KAAK,CAACG,CAAD,CAAN,CAAV;AACD;AACF;;AAEDN,IAAAA,UAAU,GAAG,IAAb;AACD,GATsB,EASpB,EAToB,CAAvB;AAUD;;AAEDQ,MAAM,CAACxB,OAAP,GAAiBiB,SAAjB;;;;;;;;;AF3BA;;AACA;;AACA;;AACA;;;;;;;;;;;;AAEA,IAAM,SAAS,GAAG,QAAQ,CAAC,cAAT,CAAwB,KAAxB,CAAlB;AACA,IAAM,cAAc,GAAG,QAAQ,CAAC,cAAT,CAAwB,OAAxB,CAAvB;AACA,IAAM,YAAY,GAAG,QAAQ,CAAC,cAAT,CAAwB,OAAxB,CAArB;AACA,IAAM,YAAY,GAAqB,QAAQ,CAAC,cAAT,CAAwB,eAAxB,CAAvC;AACA,IAAM,YAAY,GAAqB,QAAQ,CAAC,cAAT,CAAwB,MAAxB,CAAvC;AACA,IAAM,OAAO,GAAqB,QAAQ,CAAC,cAAT,CAAwB,UAAxB,CAAlC;AACA,IAAI,OAAO,GAAY,KAAvB;AACA,IAAI,UAAU,GAAW,CAAzB;AACA,IAAM,YAAY,GAAG,IAAI,sBAAJ,EAArB;AACA,IAAI,OAAO,GAAW,CAAtB;;AAEA,SAAS,QAAT,CAAkB,WAAlB,EAAyC,QAAzC,EAA0D;AACtD,MAAM,KAAK,GAAU,IAAI,cAAJ,CAAU,WAAW,CAAC,CAAD,CAArB,EAA0B,CAA1B,EAA6B,WAAW,CAAC,CAAD,CAAxC,EAA6C,CAA7C,EAAgD,QAAhD,CAArB;AACA,EAAA,YAAY,CAAC,WAAb,CAAyB,KAAzB;AACH,EAED;;;AACA,SAAS,MAAT,CAAgB,WAAhB,EAA2C,aAA3C,EAAsE;AAClE,EAAA,WAAW,CAAC,OAAZ,CAAoB,UAAA,KAAK,EAAG;AAAA,gCACmB,KAAK,CAAC,WAAN,CAAkB,KAAlB,CAAwB,GAAxB,CADnB;AAAA;AAAA,QACjB,CADiB;AAAA,QACd,YADc;AAAA,QACA,CADA;AAAA,QACG,YADH;;AAExB,QAAM,IAAI,GAAG,yCAAuB,CAAC,CAAC,QAAF,EAAvB,EAAqC,CAAC,CAAC,QAAF,EAArC,CAAb;;AAEA,QAAI,KAAK,CAAC,QAAN,IAAkB,QAAQ,CAAC,CAAD,CAAR,GAAc,iBAAI,IAApC,IAA4C,QAAQ,CAAC,CAAD,CAAR,GAAc,iBAAI,IAAlE,EAAwE;AACpE,mCAAW,IAAX;AACH;AACJ,GAPD;AASA,EAAA,aAAa,CAAC,OAAd,CAAsB,UAAA,KAAK,EAAG;AAAA,iCACiB,KAAK,CAAC,WAAN,CAAkB,KAAlB,CAAwB,GAAxB,CADjB;AAAA;AAAA,QACnB,CADmB;AAAA,QAChB,YADgB;AAAA,QACF,CADE;AAAA,QACC,YADD;;AAE1B,QAAM,IAAI,GAAG,yCAAuB,CAAC,CAAC,QAAF,EAAvB,EAAqC,CAAC,CAAC,QAAF,EAArC,CAAb;;AAEA,QAAI,KAAK,CAAC,QAAN,IAAkB,QAAQ,CAAC,CAAD,CAAR,GAAc,iBAAI,IAApC,IAA4C,QAAQ,CAAC,CAAD,CAAR,GAAc,iBAAI,IAAlE,EAAwE;AACpE,qCAAa,IAAb;AACH;AACJ,GAPD;AASA,EAAA,cAAc,CAAC,SAAf,GAA2B,CAAC,UAAU,EAAX,EAAe,QAAf,EAA3B;AACA,EAAA,OAAO,CAAC,SAAR,GAAoB,CAAC,IAAI,CAAC,GAAL,KAAa,OAAd,EAAuB,QAAvB,EAApB,CApBkE,CAsBlE;;AACA,MAAI,UAAU,GAAG,GAAb,KAAqB,CAAzB,EAA4B;AACxB,QAAM,cAAc,GAAG,MAAM,CAAC,MAAP,CAAc,YAAY,CAAC,MAA3B,EAClB,MADkB,CACX,UAAA,KAAK;AAAA,aAAI,KAAK,CAAC,QAAV;AAAA,KADM,EAElB,MAFkB,CAEX,UAAC,WAAD,EAA0B,KAA1B,EAAmC;AAAA,mCACI,KAAK,CAAC,WAAN,CAAkB,KAAlB,CAAwB,GAAxB,CADJ;AAAA;AAAA,UAChC,CADgC;AAAA,UAC7B,YAD6B;AAAA,UACf,CADe;AAAA,UACZ,YADY;;AAEvC,MAAA,WAAW,CAAC,IAAZ,CAAiB,CAAC,CAAD,EAAI,CAAJ,CAAjB;AACA,aAAO,WAAP;AACH,KANkB,EAMhB,EANgB,CAAvB;AAQA,IAAA,OAAO,GAAG,CAAV;AACA,IAAA,OAAO,CAAC,SAAR,aAAuB,OAAO,CAAC,SAA/B,iBAA+C,MAAM,CAAC,IAAP,CAAY,YAAY,CAAC,MAAzB,EAAiC,MAAhF;AACA,IAAA,YAAY,CAAC,aAAb,CAA2B,KAA3B,EAAkC,SAAlC,GAA8C,IAAI,CAAC,SAAL,CAAe,cAAf,EAA+B,IAA/B,EAAqC,CAArC,CAA9C;AACH;AACJ;;AAED,SAAS,OAAT,GAAgB;AACZ;AACA,MAAI,OAAO,KAAK,CAAhB,EAAmB;AACf;AACH;;AAED,MAAM,KAAK,GAAG,EAAd;AACA,MAAM,OAAO,GAAG,EAAhB;AACA,MAAM,SAAS,GAAG,EAAlB;AAEA,EAAA,MAAM,CAAC,MAAP,CAAc,YAAY,CAAC,MAA3B,EAAmC,OAAnC,CAA2C,UAAA,KAAK,EAAG;AAC/C,QAAM,gBAAgB,GAAW,YAAY,CAAC,uBAAb,CAAqC,KAArC,CAAjC;;AAEA,QAAI,KAAK,CAAC,QAAN,KAAmB,gBAAgB,GAAG,CAAnB,IAAwB,gBAAgB,GAAG,CAA9D,CAAJ,EAAsE;AAClE,MAAA,OAAO,CAAC,IAAR,CAAa,KAAb;AACH,KAL8C,CAO/C;;;AACA,QAAI,CAAC,KAAK,CAAC,QAAP,IAAmB,gBAAgB,KAAK,CAA5C,EAA+C;AAC3C,MAAA,KAAK,CAAC,IAAN,CAAW,KAAX;AACH,KAV8C,CAY/C;;;AACA,QAAI,KAAK,CAAC,QAAN,KAAmB,gBAAgB,IAAI,CAApB,IAAyB,gBAAgB,IAAI,CAAhE,CAAJ,EAAwE;AACpE,MAAA,SAAS,CAAC,IAAV,CAAe,KAAf;AACH;AACJ,GAhBD;AAmBA,EAAA,OAAO,CAAC,OAAR,CAAgB,UAAA,KAAK;AAAA,WAAI,YAAY,CAAC,MAAb,CAAoB,KAApB,CAAJ;AAAA,GAArB;AAEA,EAAA,KAAK,CAAC,MAAN,CAAa,SAAb,EAAwB,OAAxB,CAAgC,UAAA,KAAK;AAAA,WAAI,CAAC,KAAK,CAAC,QAAN,GAAiB,IAAlB,KAA2B,YAAY,CAAC,WAAb,CAAyB,KAAzB,CAA/B;AAAA,GAArC;AAEA,EAAA,YAAY,CAAC,YAAb;AAEA,EAAA,MAAM,CAAC,KAAD,EAAQ,OAAR,CAAN;AAEA,EAAA,UAAU,CAAC,OAAD,EAAU,CAAV,CAAV;AACH,EAED;;;AACA,YAAY,IAAI,YAAY,CAAC,gBAAb,CAA8B,OAA9B,EAAuC,UAAC,CAAD,EAAM;AACzD,MAAM,IAAI,GAAG,CAAC,CAAC,UAAf;AACA,EAAA,QAAQ,CAAC,iCAAe,IAAf,CAAD,EAAuB,iCAAe,IAAf,CAAvB,CAAR;AACH,CAHe,CAAhB;AAKA,SAAS,IAAI,SAAS,CAAC,gBAAV,CAA2B,OAA3B,EAAoC,YAAK;AAClD;AACA,MAAI,OAAO,GAAG,CAAd,EAAiB;AACb,IAAA,SAAS,CAAC,SAAV,GAAsB,SAAtB;AACA,IAAA,OAAO,GAAG,CAAV;AACA;AACH;;AAED,EAAA,OAAO,GAAG,IAAI,CAAC,GAAL,EAAV;AACA,EAAA,SAAS,CAAC,SAAV,GAAsB,MAAtB;AACA,EAAA,UAAU,CAAC,OAAD,EAAU,CAAV,CAAV;AACH,CAXY,CAAb;AAaA,YAAY,IAAI,YAAY,CAAC,gBAAb,CAA8B,QAA9B,EAAwC,YAAK;AACzD,MAAM,QAAQ,GAAG,IAAI,CAAC,KAAL,CAAW,YAAY,CAAC,KAAxB,CAAjB;AACA,EAAA,QAAQ,CAAC,OAAT,CAAiB,UAAA,WAAW,EAAG;AAC3B,QAAM,IAAI,GAAgB,yCAAuB,WAAW,CAAC,CAAD,CAAlC,EAAuC,WAAW,CAAC,CAAD,CAAlD,CAA1B;AACA,QAAI,CAAC,IAAL,EAAW;AACX,IAAA,IAAI,CAAC,KAAL;AACH,GAJD;AAKH,CAPe,CAAhB;AASA,6BAAW,YAAX","file":"src.f10117fe.map","sourceRoot":"..","sourcesContent":["export const DOM = {\n    ROWS: 100,\n    COLS: 100\n}\n\n// create the grid cells\nexport function createGrid(inputWrapper): void {\n    if (!inputWrapper) return\n\n    // clean up just in case\n    inputWrapper.childNodes.forEach((node) => node.remove())\n\n    for (let y = 0; y < DOM.ROWS; y++) {\n        const row = document.createElement('div')\n        row.setAttribute('data-row', y.toString())\n        inputWrapper.appendChild(row)\n        for (let x = 0; x < DOM.COLS; x++) {\n            const clickableElement = document.createElement('div')\n            clickableElement.classList.add('cell')\n            clickableElement.setAttribute('data-x', x.toString());\n            clickableElement.setAttribute('data-y', y.toString())\n            clickableElement.setAttribute('data-selected', 'false');\n            row.appendChild(clickableElement)\n        }\n    }\n\n}\n\nexport function toggleSelected(cell): number[] {\n    if (cellIsSelected(cell)) {\n        deselectCell(cell)\n    } else {\n        selectCell(cell)\n    }\n    return getCellCoordinates(cell)\n}\n\nexport function deselectCell(cell) {\n    cell.classList.remove('selected')\n}\n\nexport function selectCell(cell) {\n    cell.classList.add('selected')\n}\n\n// inspects the DOM for currently selected cells\nexport function getSelected(): bigint[][] {\n    const coordinates = []\n    document.querySelectorAll('#input .cell.selected').forEach(selectedCell => {\n        coordinates.push(getCellCoordinates(selectedCell))\n    })\n    return coordinates\n}\n\nexport function cellIsSelected(cell): boolean {\n    return cell.classList.contains('selected')\n}\n\nexport function getCellCoordinates(cell): number[] {\n    return [parseInt(cell.getAttribute('data-x')), parseInt(cell.getAttribute('data-y'))]\n}\n\nexport function getCellFromCoordinates(x: string, y: string) {\n    return document.querySelector(`[data-x=\"${x}\"][data-y=\"${y}\"]`)\n}\n","// represents a point in the grid which is aware of the coordinates of each of its neighbors\nexport default class Point {\n    static MIN: number = 0\n    static MAX: number = Number.MAX_SAFE_INTEGER // 0 counts\n    static MAX_MULTIPLIER: number = 2048 // there are 2048 of Number.MAX_SAFE_INTEGER in 2^64\n\n    private x: number\n    private y: number\n    private x_multiplier: number\n    private y_multiplier: number\n    private topLeftKey: string\n    private topKey: string\n    private topRightKey: string\n    private leftKey: string\n    private rightKey: string\n    private bottomLeftKey: string\n    private bottomKey: string\n    private bottomRightKey: string\n    private key: string\n    public selected: boolean\n\n    constructor(x: number, x_multiplier: number, y: number, y_multiplier: number, selected: boolean) {\n        this.x = x;\n        this.y = y;\n        this.x_multiplier = x_multiplier\n        this.y_multiplier = y_multiplier\n        this.selected = selected;\n\n        // cache some of the lookups\n        this.topLeftKey = this.topLeftNeighbor().join(':')\n        this.topKey = this.topNeighbor().join(':')\n        this.topRightKey = this.topRightNeighbor().join(':')\n        this.leftKey = this.leftNeighbor().join(':')\n        this.rightKey = this.rightNeighbor().join(':')\n        this.bottomLeftKey = this.bottomLeftNeighbor().join(':')\n        this.bottomKey = this.bottomNeighbor().join(':')\n        this.bottomRightKey = this.bottomRightNeighbor().join(':')\n\n        this.key = [this.x, this.x_multiplier, this.y, this.y_multiplier].join(':')\n    }\n\n    get coordinates(): string {\n        return this.key\n    }\n\n    // the helpers return [[x, x_multiplier], [y, y_multiplier]]\n    neighbors(): Array<string> {\n        return [\n            this.topLeftKey,\n            this.topKey,\n            this.topRightKey,\n            this.leftKey,\n            this.rightKey,\n            this.bottomLeftKey,\n            this.bottomKey,\n            this.bottomRightKey\n        ]\n    }\n\n    private bottomLeftNeighbor(): Array<number> {\n        return this.nextLowerCoordinate(this.x, this.x_multiplier).concat(this.nextHigherCoordinate(this.y, this.y_multiplier))\n    }\n\n    private bottomNeighbor(): Array<number> {\n        return [this.x, this.x_multiplier].concat(this.nextHigherCoordinate(this.y, this.y_multiplier))\n    }\n\n    private bottomRightNeighbor(): Array<number> {\n        return this.nextHigherCoordinate(this.x, this.x_multiplier).concat(this.nextHigherCoordinate(this.y, this.y_multiplier))\n    }\n\n    private leftNeighbor(): Array<number> {\n        return this.nextLowerCoordinate(this.x, this.x_multiplier).concat([this.y, this.y_multiplier])\n    }\n\n    private rightNeighbor(): Array<number> {\n        return this.nextHigherCoordinate(this.x, this.x_multiplier).concat([this.y, this.y_multiplier])\n    }\n\n    private topLeftNeighbor(): Array<number> {\n        return this.nextLowerCoordinate(this.x, this.x_multiplier).concat(this.nextLowerCoordinate(this.y, this.y_multiplier))\n    }\n\n    private topNeighbor(): Array<number> {\n        return [this.x, this.x_multiplier].concat(this.nextLowerCoordinate(this.y, this.y_multiplier))\n    }\n\n    private topRightNeighbor(): Array<number> {\n        return this.nextHigherCoordinate(this.x, this.x_multiplier).concat(this.nextLowerCoordinate(this.y, this.y_multiplier))\n    }\n\n    private nextHigherCoordinate(coord: number, multiplier: number): Array<number> {\n        if (coord == Point.MAX) {\n            multiplier = multiplier + 1\n            coord = Point.MIN\n        } else {\n            coord = coord + 1\n        }\n\n        if (multiplier > Point.MAX_MULTIPLIER) {\n            multiplier = 0\n        }\n        return [coord, multiplier]\n    }\n\n    private nextLowerCoordinate(coord: number, multiplier: number): Array<number> {\n        if (coord == Point.MIN) {\n            multiplier = multiplier - 1\n            coord = Point.MAX\n        } else {\n            coord = coord - 1\n        }\n\n        if (multiplier <= 0) {\n            multiplier = Point.MAX_MULTIPLIER\n        }\n        return [coord, multiplier]\n    }\n}\n","import Point from \"./point\";\n\nexport default class CachedPoints {\n    cache: Record<string, Point> = {}\n    private _removed: Record<string, Point> = {}\n\n    constructor() { }\n\n    get cached(): Record<string, Point> {\n        return this.cache\n    }\n\n    get visibleItems(): Object {\n        // TODO hold visible ones and return them\n        return {}\n    }\n\n    get removedItems(): Object {\n        return this._removed\n    }\n\n    public cleanRemoved(): void {\n        this._removed = {}\n    }\n\n    // add an item into the cache, has a side effect of hydrating siblings - could be more of a pure function\n    public addOrUpdate(point: Point): void {\n        if (!this.cache[point.coordinates]) {\n            this.cache[point.coordinates] = point\n        }\n        this.cache[point.coordinates].selected = point.selected\n\n        point.neighbors().forEach((neighborCoordinateKey) => {\n            const cachedPoint = this.cache[neighborCoordinateKey]\n\n            if (cachedPoint) {\n                return\n            }\n\n            let [x, x_multiplier, y, y_multiplier] = neighborCoordinateKey.split(':')\n            this.cache[neighborCoordinateKey] = new Point(parseInt(x), parseInt(x_multiplier), parseInt(y), parseInt(y_multiplier), false)\n        })\n    }\n\n    // removes an item from the cache and adds to the removed list\n    public remove(point: Point): boolean {\n        this.cache[point.coordinates]\n\n        if (!this.cache[point.coordinates]) {\n            return false\n        }\n\n        this._removed[point.coordinates] = point\n\n        return delete this.cache[point.coordinates]\n    }\n\n    // find the siblings of this point and return the total number that are selected\n    public countOfSelectedSiblings(point: Point): number {\n        // for performance we're going to rely on this guy being in the cache for sure\n        return point.neighbors().filter(neighborCoordinateKey => {\n            const cachedPoint = this.cache[neighborCoordinateKey]\n            return cachedPoint && cachedPoint.selected\n        }).length\n    }\n}\n","// index.ts\nimport message from './message'\nimport { createGrid, DOM, toggleSelected, cellIsSelected, getCellFromCoordinates, deselectCell, selectCell } from './dom_helpers'\nimport Point from './point'\nimport CachedPoints from './cached_points'\nimport './style.scss'\n\nconst runButton = document.getElementById('run')\nconst frameContainer = document.getElementById('frame')\nconst inputWrapper = document.getElementById('input')\nconst initialState = <HTMLInputElement>document.getElementById('initial-state')\nconst currentState = <HTMLInputElement>document.getElementById('meta')\nconst runTime = <HTMLInputElement>document.getElementById('run-time')\nlet running: boolean = false\nlet frameCount: number = 0\nconst cachedPoints = new CachedPoints()\nlet started: number = 0\n\nfunction addPoint(coordinates: number[], selected: boolean): void {\n    const point: Point = new Point(coordinates[0], 1, coordinates[1], 1, selected)\n    cachedPoints.addOrUpdate(point)\n}\n\n// This method determines if the UI contains any of the active points and displays them, it also serializes the cache into the textarea\nfunction syncUi(addedPoints: Array<Point>, removedPoints: Array<Point>): void {\n    addedPoints.forEach(point => {\n        const [x, x_multiplier, y, y_multiplier] = point.coordinates.split(':')\n        const cell = getCellFromCoordinates(x.toString(), y.toString())\n\n        if (point.selected && parseInt(x) < DOM.COLS && parseInt(y) < DOM.ROWS) {\n            selectCell(cell)\n        }\n    })\n\n    removedPoints.forEach(point => {\n        const [x, x_multiplier, y, y_multiplier] = point.coordinates.split(':')\n        const cell = getCellFromCoordinates(x.toString(), y.toString())\n\n        if (point.selected && parseInt(x) < DOM.COLS && parseInt(y) < DOM.ROWS) {\n            deselectCell(cell)\n        }\n    })\n\n    frameContainer.innerText = (frameCount++).toString()\n    runTime.innerText = (Date.now() - started).toString()\n\n    // let the user see how long things took after every 500 frames\n    if (frameCount % 500 === 0) {\n        const selectedPoints = Object.values(cachedPoints.cached)\n            .filter(point => point.selected)\n            .reduce((accumulator: string[][], point) => {\n                const [x, x_multiplier, y, y_multiplier] = point.coordinates.split(':')\n                accumulator.push([x, y])\n                return accumulator\n            }, [])\n\n        started = 0\n        runTime.innerText = `${runTime.innerText}ms. ${Object.keys(cachedPoints.cached).length} items in cache`\n        currentState.querySelector('pre').innerText = JSON.stringify(selectedPoints, null, 2)\n    }\n}\n\nfunction perform() {\n    // console.log(`Cache contains ${cachedPoints.cached.length} items`)\n    if (started === 0) {\n        return\n    }\n\n    const added = []\n    const removed = []\n    const surviving = []\n\n    Object.values(cachedPoints.cached).forEach(point => {\n        const selectedSiblings: number = cachedPoints.countOfSelectedSiblings(point)\n\n        if (point.selected && (selectedSiblings < 2 || selectedSiblings > 3)) {\n            removed.push(point)\n        }\n\n        // be born!\n        if (!point.selected && selectedSiblings === 3) {\n            added.push(point)\n        }\n\n        // survive\n        if (point.selected && (selectedSiblings == 2 || selectedSiblings == 3)) {\n            surviving.push(point)\n        }\n    })\n\n\n    removed.forEach(point => cachedPoints.remove(point))\n\n    added.concat(surviving).forEach(point => (point.selected = true) && cachedPoints.addOrUpdate(point))\n\n    cachedPoints.cleanRemoved()\n\n    syncUi(added, removed)\n\n    setTimeout(perform, 0)\n}\n\n// Add the ability to click cells to toggle them on and off\ninputWrapper && inputWrapper.addEventListener('click', (e) => {\n    const cell = e.srcElement\n    addPoint(toggleSelected(cell), cellIsSelected(cell))\n})\n\nrunButton && runButton.addEventListener('click', () => {\n    // allow run button to start and stop\n    if (started > 0) {\n        runButton.innerText = 'Restart'\n        started = 0\n        return\n    }\n\n    started = Date.now()\n    runButton.innerText = 'Stop'\n    setTimeout(perform, 0)\n})\n\ninitialState && initialState.addEventListener('change', () => {\n    const newState = JSON.parse(initialState.value)\n    newState.forEach(coordinates => {\n        const cell = <HTMLElement>getCellFromCoordinates(coordinates[0], coordinates[1])\n        if (!cell) return\n        cell.click()\n    })\n})\n\ncreateGrid(inputWrapper)\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n"]}